% settings/dynamic_coverpage.tex
% ===============================================================
% DYNAMIC COVER PAGE GENERATOR
% ===============================================================
% This file generates a cover page using a product-specific
% configuration file from the settings directory.
%
% USAGE: \makeDynamicCover{product_name}
% e.g., \makeDynamicCover{product1} or \makeDynamicCover{product2}
% ===============================================================

% ---------------------------------------------------------------
% Cover Page Generation Command
% ---------------------------------------------------------------
\newcommand\makeDynamicCover[1]{%
  % Load the configuration file for the specified product.
  % It expects a file named 'cover_config_#1.tex' in the 'settings' directory.
  \input{settings/cover_config_#1.tex}

  \ClearShipoutPictureBG

  \begin{titlepage}
    \thispagestyle{empty}

    \begin{tikzpicture}[remember picture, overlay]

      % ------------ Background Color ----------------------------
      \fill[\coverBgColor] (current page.south west) rectangle (current page.north east);

      % ------------ Institution Logo (top-left) -----------------
      \node[anchor=north west, xshift=\logoSideOffset, yshift=-\logoTopOffset]
        at (current page.north west)
        {\includegraphics[width=\institutionLogoWidth]{\institutionLogo}};

      % ------------ Institution Name + Meta/Etapa (top-right) ---
      \node[anchor=north east, xshift=-\logoSideOffset, yshift=-\logoTopOffset,
            align=right, text=\headerTextColor]
        at (current page.north east) {%
          \fontsize{\institutionFontSize}{0}\selectfont\bfseries \institutionName\\[0.8em]
          \fontsize{\metaEtapaFontSize}{0}\selectfont Meta \projectMeta\\[0.8em]
          \fontsize{\metaEtapaFontSize}{0}\selectfont Etapa \projectEtapa \ \projectEtapaTitle
        };

      % ------------ Project Logo (center) -----------------------
      \node[anchor=center, yshift=\projectLogoYShift] (mainLogo)
        at (current page.center)
        {\includegraphics[width=\projectLogoWidth]{\projectLogo}};

      % ------------ Date (bottom-right) -------------------------
      \node[anchor=south east, xshift=-\logoSideOffset, yshift=\dateOffsetY,
            text=\headerTextColor]
        at (current page.south east)
        {\fontsize{\dateFontSize}{0}\selectfont \projectMonth\ \projectYear};

      % ------------ Footer Bar ----------------------------------
      \fill[\coverFooterColor] (current page.south west) rectangle ++(\paperwidth, \footerHeight);

      % ------------ Footer Text ---------------------------------
      \node[anchor=south west, xshift=\logoSideOffset, yshift=\footerTextOffset,
            align=left, text=\footerTextColor]
        at (current page.south west) {%
          \fontsize{\productFontSize}{0}\selectfont\bfseries Produto \productNumber\\[0.5em]
          \fontsize{\titleFontSize}{0}\selectfont \projectTitle
        };

    \end{tikzpicture}
  \end{titlepage}

  \ClearShipoutPictureBG
  \AddToShipoutPictureBG{\BackgroundPic}
}

% ===============================================================
% The old '\makecover' command is now deprecated.
% Please use '\makeDynamicCover{product_name}' instead.
% ===============================================================